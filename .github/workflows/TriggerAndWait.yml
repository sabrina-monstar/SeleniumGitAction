name: Java CI with Maven

on:
  push:
    branches: [ main ]
    
     
jobs:
  job1:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v2 # Checkout the code
    - name: Set up JDK 1.8
      uses: actions/setup-java@v1 # Setup JAVA
      with:
        java-version: 1.8
    - name: Install Google Chrome # Using shell script to install Google Chrome
      run: |
       chmod +x InstallChrome.sh
    - name: Build with Maven
      run: mvn -B package --file pom.xml
      
  job2:
    runs-on: ubuntu-latest
    needs: job1
    steps:
    - name: Trigger the selenium-workflow from the selenium repo
      run: |
          echo "Trigger and wait"      
    - name: Trigger itssabrina repo
      uses: convictional/trigger-workflow-and-wait@v1.3.0
      with:
        owner: itssabrina
        repo: RepoTrigger
        github_token: ${{ secrets.ACCESS_TOKEN }}
        workflow_file_name: trigger.yml
    - name: Selenium YML Workflow Trigger done
      run: |
          echo "Trigger Done"      
